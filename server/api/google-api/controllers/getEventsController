const axios = require('axios');

const getEvents = async (req, res, next) => {
    try {
        const { token } = req.body;
        const { calendarId } = req.body;
        if (!calendarId || !token) {
            res.send('')
        } else {
            const eventsUrl = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events`
            const eventsRes = await axios({
                method: 'get',
                url: eventsUrl,
                headers: { Authorization: `Bearer ${ token }` }
                })
            res.send(eventsRes.data.items) }
            
    } catch ( error ) {
        next( error );
    };
}

module.exports = getEvents